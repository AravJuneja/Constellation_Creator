<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Constellation Creator</title>

    
</head>
<body>
    <h1>Constellation Creator</h1>
    <canvas id="myCanvas" width="500" height="500"></canvas>
    <div id="controls">
        <button id="Submit">Submit</button>
        <input type="text" id="textbox">
    
    </div>

    <div id = "switchconst">
    <select id="dropdown"></select>
    <button id="confirm">confirm</button> 

    </div>

    <script>//const numPoints = Math.floor(Math.random() * (15)) + 5;
        //const points = generatePoints(numPoints);
        //drawPoints(points);
        const fs = require('fs');

                class Point {
                    constructor(x, y) {
                        this.x = x;
                        this.y = y;
                    }
                }
                
                
        
        const canvas = document.getElementById('myCanvas');
                const ctx = canvas.getContext('2d');
                let points = [];
        
                function generatePoints(numPoints) {
                    const points = [];
                    const screenMarginX = canvas.width / 4;
                    const screenMarginY = canvas.height / 4;
                    for (let i = 0; i < numPoints; i++) { 
                        const x = Math.random() * (canvas.width - 2 * screenMarginX) + screenMarginX;
                        const y = Math.random() * (canvas.height - 2 * screenMarginY) + screenMarginY;
                        points.push({ x, y });
                    }
                    return points;
                }
        
                function drawPoints(points) {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    ctx.fillStyle = 'white';
                    for (const point of points) {
                        ctx.beginPath();
                        ctx.arc(point.x, point.y, 2, 0, Math.PI * 2); 
                        ctx.fill();
                    }
                }
        
                function drawLine(startX, startY, endX, endY) {
                    ctx.beginPath();
                    ctx.moveTo(startX, startY);
                    ctx.lineTo(endX, endY);
                    ctx.strokeStyle = 'white';
                    ctx.stroke();
                }
        
                canvas.addEventListener('mousedown', function(event) {
                    const rect = canvas.getBoundingClientRect();
                    const mouseX = event.clientX - rect.left;
                    const mouseY = event.clientY - rect.top;
                    points.push({x: mouseX, y: mouseY});
                    if (points.length === 2) {
                        drawLine(points[0].x, points[0].y, points[1].x, points[1].y);
                        points = [];
                    }
                });
        
                function populateDropdown(options) {
                    const dropdown = document.getElementById('dropdown');
                    dropdown.innerHTML = ''; // Clear existing options
                    for (let i = 0; i < options.length; i++) {
                        const option = document.createElement('option');
                        option.value = i + 1;
                        option.text = i + 1;
                        dropdown.appendChild(option);
                    }
                }
        


                function grabRowFromCSV(index) {
                            const csvData = fs.readFileSync('const_data.csv', 'utf8');

                            const rows = csvData.split('\n');

                            const selectedRow = rows[index];

                            // If the row is undefined, return an empty array
                            if (!selectedRow) {
                                return [];
                            }
                        
                            // Split the selected row by commas
                            const elements = selectedRow.split(',');
                        
                            // Create a list to store non-empty elements
                            const resultList = [];
                        
                            // Iterate through each element
                            for (let i = 0; i < elements.length; i++) {
                                // Trim the element to remove leading/trailing whitespaces
                                const trimmedElement = elements[i].trim();
                            
                                // Check if the element is not empty
                                if (trimmedElement !== '') {
                                    // Add the non-empty element to the list
                                    resultList.push(trimmedElement);
                                }
                            }
                        
                            return resultList;
}
        
                function handleConfirm() {
                    
                    const list = grabRowFromCSV(document.getElementById('dropdown').value);

                    console.log(list)
                }
        

                function main() {
                    fetch('const_data.csv')
                        .then(response => response.text())
                        .then(data => {
                            // Split CSV data by lines to count rows
                            const rows = data.trim().split('\n');
                            const numOptions = rows.length;
                            populateDropdown(new Array(numOptions).fill());
                        })
                        .catch(error => console.error('Error fetching CSV:', error));
        
                    const dropdown = document.getElementById('dropdown');
        
                    
        
                    document.getElementById('confirm').addEventListener('click', handleConfirm);
                    
                    
               
                 }
        
                main();
                </script>

</body>
</html>


<style>
    
    body {
            background-image: url('background.jpg');
            background-size: cover;
            background-position: center;
            font-family: 'Roboto', sans-serif;
            color: #000;
        }

        h1 {
            text-align: center;
            margin-top: 20px;
            margin-bottom: 20px;
            color: #fff;
        }

        #myCanvas {
            border: 1px solid #000;
            margin: 0 auto;
            display: block;
            margin-top: 20px;
            margin-bottom: 20px;
            box-shadow: 0 0 10px #000;
            border-radius: 10px;
            background-color: #000000;
            cursor: pointer;
            transition: 0.3s;
            width: 100%;
            max-width: 500px;
            height: 500px;
            max-height: 500px;
            overflow: hidden;
            position: relative;
            z-index: 1;
        }

        #controls {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 20px;
            margin-bottom: 20px;
        }

        #controls button {
            padding: 10px 20px;
            margin: 0 10px;
            border: none;
            border-radius: 5px;
            background-color: #fff;
            color: #000;
            cursor: pointer;
            transition: 0.3s;
        }

        #controls button:hover {
            background-color: #000000;
            color: #fff;
        }

        #textbox {
            border-radius: 50px;
            padding: 10px 20px;
            border: none;
        }


        #switchconst{
            padding: 10px 20px;
            margin: 0 10px;
            border: none;
            border-radius: 5px;
            background-color: #fff;
            color: #000;
            cursor: pointer;
            position: absolute;
            top: 0;
            left: 0;
            background-color: #981919;
        }

        
</style>